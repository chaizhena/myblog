{"remainingRequest":"D:\\webProject\\vueblog-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\webProject\\vueblog-vue\\src\\axios.js","dependencies":[{"path":"D:\\webProject\\vueblog-vue\\src\\axios.js","mtime":1638761249367},{"path":"D:\\webProject\\vueblog-vue\\babel.config.js","mtime":1638172637704},{"path":"D:\\webProject\\vueblog-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638172628679},{"path":"D:\\webProject\\vueblog-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1638172629714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBFbGVtZW50IGZyb20gImVsZW1lbnQtdWkiOwppbXBvcnQgc3RvcmUgZnJvbSAiLi9zdG9yZSI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi9yb3V0ZXIiOwpheGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MSc7CmF4aW9zLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgY29uc29sZS5sb2coIuWJjee9ruaLpuaIqiIpOyAvLyDlj6/ku6Xnu5/kuIDorr7nva7or7fmsYLlpLQKCiAgcmV0dXJuIGNvbmZpZzsKfSk7CmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgdmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7CiAgY29uc29sZS5sb2coIuWQjue9ruaLpuaIqiIpOyAvLyDlvZPnu5PmnpznmoRjb2Rl5piv5ZCm5Li6MjAw55qE5oOF5Ya1CgogIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICByZXR1cm4gcmVzcG9uc2U7CiAgfSBlbHNlIHsKICAgIC8vIOW8ueeql+W8guW4uOS/oeaBrwogICAgRWxlbWVudC5NZXNzYWdlKHsKICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLAogICAgICB0eXBlOiAnZXJyb3InLAogICAgICBkdXJhdGlvbjogMiAqIDEwMDAKICAgIH0pOyAvLyDnm7TmjqXmi5Lnu53lvoDkuIvpnaLov5Tlm57nu5Pmnpzkv6Hmga8KCiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzcG9uc2UuZGF0YS5tZXNzYWdlKTsKICB9Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGNvbnNvbGUubG9nKCdlcnInICsgZXJyb3IpOyAvLyBmb3IgZGVidWcKCiAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEpIHsKICAgIGVycm9yLm1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2U7CiAgfSAvLyDmoLnmja7or7fmsYLnirbmgIHop4nlvpfmmK/lkKbnmbvlvZXmiJbogIXmj5DnpLrlhbbku5YKCgogIGlmIChlcnJvci5yZXNwb25zZS5jb2RlID09PSA0MDEpIHsKICAgIHN0b3JlLmNvbW1pdCgnUkVNT1ZFX0lORk8nKTsKICAgIHJvdXRlci5wdXNoKHsKICAgICAgcGF0aDogJy9sb2dpbicKICAgIH0pOwogICAgZXJyb3IubWVzc2FnZSA9ICfor7fph43mlrDnmbvlvZUnOwogIH0KCiAgaWYgKGVycm9yLnJlc3BvbnNlLmNvZGUgPT09IDQwMykgewogICAgZXJyb3IubWVzc2FnZSA9ICfmnYPpmZDkuI3otrPvvIzml6Dms5Xorr/pl64nOwogIH0KCiAgRWxlbWVudC5NZXNzYWdlKHsKICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsCiAgICB0eXBlOiAnZXJyb3InLAogICAgZHVyYXRpb246IDMgKiAxMDAwCiAgfSk7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7"},{"version":3,"sources":["D:/webProject/vueblog-vue/src/axios.js"],"names":["axios","Element","store","router","defaults","baseURL","interceptors","request","use","config","console","log","response","res","data","code","Message","message","type","duration","Promise","reject","error","commit","push","path"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACAH,KAAK,CAACI,QAAN,CAAeC,OAAf,GAAuB,uBAAvB;AACAL,KAAK,CAACM,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAAC,MAAM,EAAI;AACvCC,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EADuC,CAEvC;;AACA,SAAOF,MAAP;AACD,CAJD;AAKAT,KAAK,CAACM,YAAN,CAAmBM,QAAnB,CAA4BJ,GAA5B,CAAgC,UAAAI,QAAQ,EAAI;AACxC,MAAMC,GAAG,GAAGD,QAAQ,CAACE,IAArB;AACAJ,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAFwC,CAGxC;;AACA,MAAIE,GAAG,CAACE,IAAJ,KAAa,GAAjB,EAAsB;AACpB,WAAOH,QAAP;AACD,GAFD,MAEO;AACL;AACAX,IAAAA,OAAO,CAACe,OAAR,CAAgB;AACdC,MAAAA,OAAO,EAAEL,QAAQ,CAACE,IAAT,CAAcG,OADT;AAEdC,MAAAA,IAAI,EAAE,OAFQ;AAGdC,MAAAA,QAAQ,EAAE,IAAI;AAHA,KAAhB,EAFK,CAOL;;AACA,WAAOC,OAAO,CAACC,MAAR,CAAeT,QAAQ,CAACE,IAAT,CAAcG,OAA7B,CAAP;AACD;AACF,CAhBH,EAiBE,UAAAK,KAAK,EAAI;AACPZ,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAQW,KAApB,EADO,CACmB;;AAC1B,MAAGA,KAAK,CAACV,QAAN,CAAeE,IAAlB,EAAwB;AACtBQ,IAAAA,KAAK,CAACL,OAAN,GAAgBK,KAAK,CAACV,QAAN,CAAeE,IAAf,CAAoBG,OAApC;AACD,GAJM,CAKP;;;AACA,MAAIK,KAAK,CAACV,QAAN,CAAeG,IAAf,KAAwB,GAA5B,EAAiC;AAC/Bb,IAAAA,KAAK,CAACqB,MAAN,CAAa,aAAb;AACApB,IAAAA,MAAM,CAACqB,IAAP,CAAY;AACVC,MAAAA,IAAI,EAAE;AADI,KAAZ;AAGAH,IAAAA,KAAK,CAACL,OAAN,GAAgB,OAAhB;AACD;;AACD,MAAIK,KAAK,CAACV,QAAN,CAAeG,IAAf,KAAwB,GAA5B,EAAiC;AAC/BO,IAAAA,KAAK,CAACL,OAAN,GAAgB,WAAhB;AACD;;AACDhB,EAAAA,OAAO,CAACe,OAAR,CAAgB;AACdC,IAAAA,OAAO,EAAEK,KAAK,CAACL,OADD;AAEdC,IAAAA,IAAI,EAAE,OAFQ;AAGdC,IAAAA,QAAQ,EAAE,IAAI;AAHA,GAAhB;AAKA,SAAOC,OAAO,CAACC,MAAR,CAAeC,KAAf,CAAP;AACD,CAvCH","sourcesContent":["import axios from 'axios'\r\nimport Element from \"element-ui\";\r\nimport store from \"./store\";\r\nimport router from \"./router\";\r\naxios.defaults.baseURL='http://localhost:8081'\r\naxios.interceptors.request.use(config => {\r\n  console.log(\"前置拦截\")\r\n  // 可以统一设置请求头\r\n  return config\r\n})\r\naxios.interceptors.response.use(response => {\r\n    const res = response.data;\r\n    console.log(\"后置拦截\")\r\n    // 当结果的code是否为200的情况\r\n    if (res.code === 200) {\r\n      return response\r\n    } else {\r\n      // 弹窗异常信息\r\n      Element.Message({\r\n        message: response.data.message,\r\n        type: 'error',\r\n        duration: 2 * 1000\r\n      })\r\n      // 直接拒绝往下面返回结果信息\r\n      return Promise.reject(response.data.message)\r\n    }\r\n  },\r\n  error => {\r\n    console.log('err' + error)// for debug\r\n    if(error.response.data) {\r\n      error.message = error.response.data.message\r\n    }\r\n    // 根据请求状态觉得是否登录或者提示其他\r\n    if (error.response.code === 401) {\r\n      store.commit('REMOVE_INFO');\r\n      router.push({\r\n        path: '/login'\r\n      });\r\n      error.message = '请重新登录';\r\n    }\r\n    if (error.response.code === 403) {\r\n      error.message = '权限不足，无法访问';\r\n    }\r\n    Element.Message({\r\n      message: error.message,\r\n      type: 'error',\r\n      duration: 3 * 1000\r\n    })\r\n    return Promise.reject(error)\r\n  })\r\n"]}]}